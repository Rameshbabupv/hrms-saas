# HRMS SaaS Keycloak QA Environment Configuration
# Copy this file to .env and update with your secure values
# DO NOT commit .env file to version control

# ============================================================================
# PostgreSQL Configuration
# ============================================================================
POSTGRES_PASSWORD=change_this_secure_password_123

# ============================================================================
# Keycloak Configuration
# ============================================================================
KEYCLOAK_ADMIN_PASSWORD=change_this_secure_admin_password_123

# Keycloak hostname (use your QA domain)
# Examples:
#   - keycloak-qa.yourdomain.com
#   - qa-keycloak.internal.network
#   - localhost (for local testing)
KEYCLOAK_HOSTNAME=localhost

# ============================================================================
# pgAdmin Configuration
# ============================================================================
PGADMIN_EMAIL=admin@yourcompany.com
PGADMIN_PASSWORD=change_this_pgadmin_password_123

# ============================================================================
# HRMS SaaS Specific Configuration
# ============================================================================
# These values are used by the setup scripts

# Realm configuration
REALM_NAME=hrms-saas
REALM_DISPLAY_NAME=HRMS SaaS Platform

# Client configuration
CLIENT_ID=hrms-web-app
CLIENT_NAME=HRMS Web Application

# Token lifespans (in seconds)
ACCESS_TOKEN_LIFESPAN=1800           # 30 minutes
SSO_SESSION_IDLE_TIMEOUT=3600        # 1 hour
SSO_SESSION_MAX_LIFESPAN=36000       # 10 hours

# Redirect URIs (comma-separated)
# Add your QA application URLs here
REDIRECT_URIS=https://hrms-qa.yourdomain.com/*,http://localhost:3000/*,http://localhost:3001/*

# Web Origins (comma-separated)
WEB_ORIGINS=https://hrms-qa.yourdomain.com,http://localhost:3000,http://localhost:3001

# ============================================================================
# Security Settings
# ============================================================================

# Brute force protection
BRUTE_FORCE_PROTECTED=true
MAX_LOGIN_FAILURES=5
WAIT_INCREMENT_SECONDS=60
MAX_FAILURE_WAIT_SECONDS=900         # 15 minutes

# Email verification
VERIFY_EMAIL=true
LOGIN_WITH_EMAIL_ALLOWED=true

# Password policy (optional - can be configured via admin console)
# Examples: length(8), upperCase(1), lowerCase(1), digits(1), specialChars(1)
PASSWORD_POLICY=length(8) and upperCase(1) and lowerCase(1) and digits(1)

# ============================================================================
# Integration Configuration (for application setup)
# ============================================================================

# Spring Boot application
SPRING_SECURITY_OAUTH2_ISSUER_URI=http://${KEYCLOAK_HOSTNAME}:8090/realms/${REALM_NAME}
SPRING_SECURITY_OAUTH2_JWK_SET_URI=http://${KEYCLOAK_HOSTNAME}:8090/realms/${REALM_NAME}/protocol/openid-connect/certs

# React application
REACT_APP_KEYCLOAK_URL=http://${KEYCLOAK_HOSTNAME}:8090
REACT_APP_KEYCLOAK_REALM=${REALM_NAME}
REACT_APP_KEYCLOAK_CLIENT_ID=${CLIENT_ID}

# ============================================================================
# Backup Configuration (optional)
# ============================================================================
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/opt/backups/keycloak

# ============================================================================
# Notes:
# ============================================================================
# 1. Generate strong passwords using: openssl rand -base64 32
# 2. For production, use a secrets management system
# 3. Ensure .env is in .gitignore
# 4. Update KEYCLOAK_HOSTNAME with your actual QA domain
# 5. Adjust token lifespans based on your security requirements
